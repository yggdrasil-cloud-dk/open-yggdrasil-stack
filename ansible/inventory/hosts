---
all:

  # hosts and hostvars and all shared vars
  hosts:
    os01:
      ansible_host: "{{ lookup('ansible.builtin.pipe', 'hostname -i') }}"
      inventory_index: 1
      ansible_connection: local

  vars:
    dev: true
    default_gateway_interface: "{{ lookup('ansible.builtin.pipe', 'ip route | grep \"^default\" | head -n 1 | grep -o \"dev .*\" | cut -d \" \" -f 2') }}"
    gateway_ip: "{{ lookup('ansible.builtin.pipe', 'ip route | grep \"^default\" | head -n 1 | grep -o \"via .*\" | cut -d \" \" -f 2') }}"
    ceph_osd_devices:
      - /dev/vg-0/lv-0
      - /dev/vg-1/lv-1
      - /dev/vg-2/lv-2
    openstack_mgmt_ip: "10.0.10.{{ inventory_index }}/24"
    ceph_public_ip: "10.0.50.{{ inventory_index }}/24"
    ceph_cluster_ip: "10.0.60.{{ inventory_index }}/24"

  # groups and group vars
  children:
    deployment_controller:
      hosts:
        os01:
    deployment_nodes:
      hosts:
        os01:
